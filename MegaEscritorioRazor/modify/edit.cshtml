@{

    var name = "";
    var width = "";
    var length = "";
    var materialType ="";
    var numOfDrawers = "";
    var rushOrderDays = "";
    var surfacePrice = "";
    var surfaceUpgrade = "";
    var shippingPrice = "";
    var surfaceArea = "";
    var price = "";
    var id = UrlData[0];

    if (id.IsEmpty())
    {
        Response.Redirect("~/index");
    }

    var db = Database.Open("Orders");

    if (IsPost && Validation.IsValid())
    {
        Validation.RequireField("name", "Name is required.");
        Validation.RequireField("width", "Width is required.");
        Validation.RequireField("length", "Length is required.");
        Validation.RequireField("id", "Where's the order ID?");

        name = Request.Form["name"];
        width = Request.Form["width"];
        length = Request.Form["length"];
        materialType = Request.Form["getMaterial"];
        numOfDrawers = Request.Form["getDrawers"];
        rushOrderDays = Request.Form["getDays"];
        id = Request.Form["id"];

        var queryString = "UPDATE Orders2 SET Name=@0, Width=@2, Length=@3, NumDrawers=@4, MaterialType=@5, RushDays=@6, Price=@7 WHERE Id=@8";
        db.Execute(queryString, name, width, length, numOfDrawers, materialType, rushOrderDays, price, id);
        Response.Redirect("~/index/view-orders");
    } else
    {
        var queryString = "SELECT * FROM Orders2 WHERE Id=@0";
        var row = db.QuerySingle(queryString, id);

        name = row.Name;
        width = row.Width;
        length = row.Length;
        materialType = row.MaterialType;
        numOfDrawers = row.NumDrawers;
        rushOrderDays = row.RushDays;
        price = row.Price;
    }
}



@section header {
    <header>
        <h1>Edit Order for @name</h1>
    </header>
}
@RenderPage("~/shared/_head.cshtml")
<form id="edit-entry" method="post">
    @Html.ValidationSummary()
    <h4>Base Desk Price: $200</h4>
    <div class="form-group">
        <label>Name:</label>
        <input class="form-control" name="Name" type="text" size="20" value="@name" />

    </div>
    <div class="form-group">
        <label>Width:</label>
        <input class="form-control" name="Width" type="text" size="20" value="@width" />

    </div>
    <div class="form-group">
        <label>Length:</label>
        <input class="form-control" name="Length" type="text" size="20" value="@length" />

    </div>

   <!-- need to figure out how to pre-set these values to the correct ones for the id -->

    <div class="form-group">
        <label>Desk Material:</label>
        <select class="form-control" name="getMaterial">
            <option value="pine" @(materialType == "pine" ? "selected" : "")>Pine - $50</option>
            <option value="poplar" @(materialType == "poplar" ? "selected" : "")>Poplar - $75</option>
            <option value="laminate" @(materialType == "laminate" ? "selected" : "")>Laminate - $100</option>
            <option value="oak" @(materialType == "oak" ? "selected" : "")>Oak - $200</option>
            <option value="alder" @(materialType == "alder" ? "selected" : "")>Alder - $250</option>
        </select>
    </div>
    <div class="material-types row">
        <div class="img-container">
            <img class="pine" src="~/assets/images/pine.jpg" height="100" width="100" />
        </div>
        <div class="img-container">
            <img class="poplar" src="~/assets/images/poplar.jpg" height="100" width="100" />
        </div>
        <div class="img-container">
            <img class="laminate" src="~/assets/images/laminate.jpg" height="100" width="100" />
        </div>
        <div class="img-container">
            <img class="oak" src="~/assets/images/oak.jpeg" height="100" width="100" />
        </div>
        <div class="img-container">
            <img class="alder" src="~/assets/images/alder.jpg" height="100" width="100" />
        </div>
    </div>
    <div class="form-group">
        <label>Number Of Drawers:</label>
        <select class="form-control" name="getDrawers">
            <option value="zero" @(numOfDrawers == "zero" ? "selected" : "")>0</option>
            <option value="one" @(numOfDrawers == "one" ? "selected" : "")>1 - $50</option>
            <option value="two" @(numOfDrawers == "two" ? "selected" : "")>2 - $100</option>
            <option value="three" @(numOfDrawers == "three" ? "selected" : "")>3 - $150</option>
            <option value="four" @(numOfDrawers == "four" ? "selected" : "")>4 - $200</option>v
            <option value="five" @(numOfDrawers == "five" ? "selected" : "")>5 - $250</option>
            <option value="six" @(numOfDrawers == "six" ? "selected" : "")>6 - $300</option>
            <option value="seven" @(numOfDrawers == "seven" ? "selected" : "")>7 - $350</option>
        </select>
    </div>
    <div class="form-group">
        <label>Shipping Days:</label>
        <select class="form-control" name="getDays">
            <option value="three" @(rushOrderDays == "three" ? "selected" : "")>3 days</option>
            <option value="five" @(rushOrderDays == "five" ? "selected" : "")>5 days</option>
            <option value="seven" @(rushOrderDays == "seven" ? "selected" : "")>7 days</option>
            <option value="ground" @(rushOrderDays == "fourteen" ? "selected" : "")>14 days</option>
        </select>
    </div>
    <div class="button-group">
        <a href="~/index/display-orders" class="btn btn-default">Cancel</a>
        <button type="submit" class="btn btn-primary">Submit Changes</button>
    </div>
</form>
@RenderPage("~/shared/_footer.cshtml")